<!DOCTYPE html>
<html lang="es">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Intento de configurar OAUTH2 de google -->
  <meta name="google-signin-client_id"
    content="305026700884-b8fbgddclb5gbvokpmtc2eth2jnq1e40.apps.googleusercontent.com">
  <title>eMercado - Todo lo que busques está aquí</title>

  <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">

  <style>
    body {
      background-color: rgb(248, 249, 250);
    }
  </style>
</head>

<body>
  <main>

    <div class="container text-center login">
      <img src="img/login.png" alt="">
      <h1>Inicio de sesión</h1><br><br>

      <h2 class="h3 mb-3 fw-normal">Email</h2>
      <div class="form-floating">
        <input type="email" class="form-control" id="mail" placeholder="name@example.com">
        <label for="floatingInput">Email</label>
        <div id="correo_error" class="error">

        </div>
      </div><br>

      <h2 class="h3 mb-3 fw-normal">Contraseña</h2>
      <div class="form-floating">
        <input type="password" class="form-control" id="contraseña" placeholder="Password">
        <label for="floatingPassword">Contraseña</label>
        <div id="contra_error" class="error">

        </div>
      </div><br><br>

      <button class="w-100 btn btn-lg btn-primary" id="iniciar" type="submit">Ingresar</button>
      <br><br>
      <!-- Intento de configurar OAUTH2 de google -->
      <h3>o ingrese con google:</h3>


      <div id="g_id_onload" data-client_id="305026700884-b8fbgddclb5gbvokpmtc2eth2jnq1e40.apps.googleusercontent.com"
        data-callback="onSignIn">
      </div>
      <div class="g_id_signin" data-type="standard"></div>

    </div>

  </main>
  <footer class="text-muted">
    <div class="container">
      <p class="float-end">
        <a href="#">Volver arriba</a>
      </p>
      <p>Este sitio forma parte de <a href="https://jovenesaprogramar.edu.uy/" target="_blank">Jovenes a Programar</a> -
        2022</p>
      <p>Clickea <a target="_blank" href="Letra.pdf">aquí</a> para descargar la letra del obligatorio.</p>
    </div>
  </footer>
  <script>
   function parseJwt(token) {
      var base64Url = token.split(".")[1];
      var base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
      var jsonPayload = decodeURIComponent(
        window
          .atob(base64)
          .split("")
          .map(function (c) {
            return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
          })
          .join("")
      );

      return JSON.parse(jsonPayload);
    } 
   /* FUNCION PARA  iniciar sesion con googel*/
    function onSignIn(googleUser) {
      let profile = parseJwt(googleUser.credential)
      console.log(profile)
      localStorage.setItem('mail', profile.given_name)
      location.href = "index.html";
      /* console.log("ID: " + profile.mail);
      console.log("ID: " + profile.getId());
      console.log("Name: " + profile.getName());
      var id_token = googleUser.getAuthResponse().id_token;
      console.log("ID Token: " + id_token); */
    }
    
  </script>
  <script src="js/login.js"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>

</body>

</html>